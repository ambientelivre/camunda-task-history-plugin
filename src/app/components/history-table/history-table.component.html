<ng-template #header>
  <tr>
    <th>{{ "labels.ACTION" | translate }}</th>
    <th>{{ "labels.VARIABLE_NAME" | translate }}</th>
    <th>{{ "labels.VARIABLE_TYPE" | translate }}</th>
    <th>{{ "labels.CREATION_DATE" | translate }}</th>
    <th>{{ "labels.FINISHED" | translate }}</th>
  </tr>
</ng-template>

<ng-template #body>
  <tr *ngFor="let h of history">
    <td>{{ h.type }}</td>
    <td>{{ h.key }}</td>
    <td>
      <a
        *ngIf="h.valueType === 'File'; else jsonType"
        href="/camunda/api/engine/engine/default/variable-instance/{{
          h.id
        }}/data"
        >{{ "labels.DOWNLOAD" | translate }}</a
      >

      <ng-template #jsonType>
        <ngx-json-viewer
          [expanded]="true"
          [json]="
            h.valueType === 'Json'
              ? parse(h.value)
              : h.value === null
              ? undefined
              : h.value
          "
        ></ngx-json-viewer>
      </ng-template>
    </td>
    <td>{{ h.startTime | date : "M/d/yy, h:mm:ss" }}</td>
    <td>{{ h.endTime }}</td>
  </tr>
</ng-template>

<custom-table [thead]="header" [tbody]="body"></custom-table>
